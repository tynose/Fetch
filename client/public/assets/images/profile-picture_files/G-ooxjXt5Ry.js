if (self.CavalryLogger) { CavalryLogger.start_js(["xs32F"]); }

__d("ChannelConnectionEvents",[],(function(a,b,c,d,e,f){e.exports={CONNECTED:"chat-connection/connected",RECONNECTING:"chat-connection/reconnecting",SHUTDOWN:"chat-connection/shutdown",MUTE_WARNING:"chat-connection/mute",UNMUTE_WARNING:"chat-connection/unmute"}}),null);
__d("ChannelConnection",["Arbiter","ArbiterMixin","ChannelConnectionEvents","ChannelConstants","ChannelManager","JSLogger","Run","SystemEvents","Visibility","clearTimeout","mixin","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){__p&&__p();var g,h=b("JSLogger").create("channel_connection"),i=null,j=null,k=null,l=null,m=0;b("ChannelManager").startChannelManager();c=babelHelpers.inherits(a,b("mixin")(b("ArbiterMixin")));g=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=g.constructor).call.apply(a,[this].concat(e)),this.CONNECTED=b("ChannelConnectionEvents").CONNECTED,this.RECONNECTING=b("ChannelConnectionEvents").RECONNECTING,this.SHUTDOWN=b("ChannelConnectionEvents").SHUTDOWN,this.MUTE_WARNING="chat-connection/mute",this.UNMUTE_WARNING="chat-connection/unmute",this.unmuteWarning=p,c}a.prototype.disconnected=function(){"use strict";return l===n.SHUTDOWN||l===n.RECONNECTING&&!j&&m>1};a.prototype.isShutdown=function(){"use strict";return l===n.SHUTDOWN};a.prototype.reconnect=function(a){a===void 0&&(a=!1);if(b("ChannelManager").state==="ping"||b("ChannelManager").state==="pull"||b("ChannelManager").isShutdown())return;h.log("reconnect",{now:a});n.inform(n.RECONNECTING,0);a?(i!==null&&(b("clearTimeout")(i),i=null),b("ChannelManager").enterState("ping!")):i||(i=b("setTimeoutAcrossTransitions")(function(){b("ChannelManager").enterState("ping!"),i=null},b("ChannelConstants").CHANNEL_MANUAL_RECONNECT_DEFER_MSEC));b("ChannelManager").resetDelay()};a.prototype.mockAfterLoad=function(){"use strict";t(),u()};var n=new a();b("Run").onBeforeUnload(function(){});function o(){j&&(b("clearTimeout")(j),j=null)}function p(){o(),h.log("unmute_warning"),n.inform(n.UNMUTE_WARNING)}function q(a){o(),j=b("setTimeoutAcrossTransitions")(p,a),h.log("mute_warning",{time:a}),n.inform(n.MUTE_WARNING)}function r(){k&&(b("clearTimeout")(k),k=null)}function s(a,c){__p&&__p();r();if(a===b("ChannelConstants").ON_ENTER_STATE&&(c.nextState||c.state)==="pull"){if(l!==n.CONNECTED){h.log("connected");var d=!l;l=n.CONNECTED;m=0;n.inform(n.CONNECTED,{init:d})}}else a===b("ChannelConstants").ON_ENTER_STATE&&((c.nextState||c.state)==="ping"||!c.nextState&&c.state==="idle")?k=b("setTimeoutAcrossTransitions")(function(){var b=null;c.state==="idle"&&!c.nextState||(b=c.delay||0);h.log("reconnecting",{delay:b});n.disconnected()&&h.log("reconnecting_ui",{delay:b});l=n.RECONNECTING;c.state==="idle"&&m++;m>1?n.inform(n.RECONNECTING,b):!c.nextState&&c.state==="idle"&&s(a,c)},500):a===b("ChannelConstants").ON_SHUTDOWN&&(h.log("shutdown",{reason:c.reason}),l=n.SHUTDOWN,m=0,n.inform(n.SHUTDOWN,c.reason))}function t(){b("ChannelManager").isShutdown()?s(b("ChannelConstants").ON_SHUTDOWN,b("ChannelManager")._shutdownHint):s(b("ChannelConstants").ON_ENTER_STATE,{state:b("ChannelManager").state,nextState:b("ChannelManager").nextState,delay:0}),b("Visibility").addListener(b("Visibility").VISIBLE,n.reconnect)}b("Run").onAfterLoad(t);function u(){b("Arbiter").subscribe([b("ChannelConstants").ON_ENTER_STATE,b("ChannelConstants").ON_SHUTDOWN],s),b("Arbiter").subscribe(b("ChannelConstants").ATTEMPT_RECONNECT,function(){n.disconnected()&&n.reconnect()}),b("SystemEvents").subscribe(b("SystemEvents").TIME_TRAVEL,function(){n.reconnect(),q(b("ChannelConstants").MUTE_WARNING_TIME_MSEC)}),b("Run").onBeforeUnload(r,!1)}b("Run").onAfterLoad(u);b("Arbiter").subscribe(b("JSLogger").DUMP_EVENT,function(a,b){b.channel_connected=!n.disconnected()});e.exports=n}),3);
__d("NotificationBeeperItem.react",["cx","CSSFade","NotificationBeeperConst","NotificationBeeperItemContents.react","NotificationBeeperItemRenderersList","React","ReactDOM","Style","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){__p&&__p();var h,i=b("NotificationBeeperConst").FADE_OUT_LENGTH;c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=h.constructor).call.apply(a,[this].concat(d)),this.state={encounteredException:!1,fadedIn:!1,hidden:!1},this.$3=function(){this.setState({hidden:!0})}.bind(this),b}a.prototype.componentDidCatch=function(){"use strict";this.props.onReadyToHide(this.props.notification.alert_id),this.setState(function(a){return babelHelpers["extends"]({},a,{encounteredException:!0})})};a.prototype.componentDidMount=function(){"use strict";b("setTimeoutAcrossTransitions")(function(){this.setState({fadedIn:!0})}.bind(this),50),this.props.onInserted(this.props.notification.alert_id)};a.prototype.componentWillUnmount=function(){"use strict";this.$1&&this.$1.cancel()};a.prototype.render=function(){"use strict";if(this.state.encounteredException)return null;var a=this.props.notification,c=a.renderer_data;a=a.tracking;c=this.$4(c);return b("React").createElement("li",{className:this.state.hidden?"hidden_elem":"",ref:function(a){return this.$2=a}.bind(this),"data-gt":a},b("React").createElement(c,{className:"_3sod"+(this.state.fadedIn?" _3soe":""),notification:this.props.notification,onHide:this.$3,onReadyToHide:this.props.onReadyToHide,onPreventHide:this.props.onPreventHide}))};a.prototype.componentDidUpdate=function(a,c,d){"use strict";if(!this.$2)return;a=b("ReactDOM").findDOMNode(this.$2);if(!a)return;this.props.fadingOut?(this.$1=b("CSSFade").hide(a,{callback:this.$3,duration:i}),a.style.transitionDuration="0ms"):(this.$1&&(this.$1.cancel(),this.$1=void 0),b("Style").set(a,"opacity","1"))};a.prototype.$4=function(a){"use strict";return a&&a.__typename==="LiveVideoNotificationRendererData"&&a.video_id==null?b("NotificationBeeperItemContents.react"):b("NotificationBeeperItemRenderersList")[a&&a.__typename]||b("NotificationBeeperItemContents.react")};e.exports=a}),null);
__d("NotificationImpressions",["AsyncSignal","NotificationTokens","URI"],(function(a,b,c,d,e,f){var g="/ajax/notifications/impression.php";function a(a,c){var d={ref:c};b("NotificationTokens").untokenizeIDs(a).forEach(function(a,b){d["alert_ids["+b+"]"]=a});new(b("AsyncSignal"))(new(b("URI"))(g).getQualifiedURI().toString(),d).send()}e.exports={log:a}}),null);
__d("NotificationBeeper.react",["cx","Arbiter","ChannelConstants","FacebookWebNotificationsSubscription","NotificationBeeperConst","NotificationBeeperItem.react","NotificationConstants","NotificationImpressions","NotificationSound","NotificationUpdates","NotificationUserActions","NotifTestIDs","React","SubscriptionsHandler","clearTimeout","setTimeoutAcrossTransitions","shield"],(function(a,b,c,d,e,f,g){__p&&__p();var h,i=b("NotificationBeeperConst").ACTIVE_DELAY_LONG,j=b("NotificationBeeperConst").BeepStates,k=b("NotificationBeeperConst").FADE_OUT_LENGTH,l=b("NotificationBeeperConst").IDLE_DELAY,m="beeper";c=b("NotificationConstants").PayloadSourceType;var n=c.CLIENT,o=c.OTHER_APPLICATION;d=babelHelpers.inherits(a,b("React").Component);h=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=h.constructor).call.apply(a,[this].concat(e)),this.state={beeps:{},fading:!1,hovering:!1,soundEnabled:this.props.soundEnabled},this.onMouseEnter=function(){this.$2&&b("clearTimeout")(this.$2);var a=[],c=this.state.beeps;Object.keys(c).forEach(function(b){c[b].state!=j.PENDING?a.push(b):c[b].state=j.RENDERED});b("NotificationUserActions").markNotificationsAsSeen(a);this.setState({hovering:!0,fading:!1,beeps:c})}.bind(this),this.onMouseLeave=function(){this.$5(i),this.setState({hovering:!1})}.bind(this),this.$6=function(a){this.state.hovering||this.$5(),this.state.soundEnabled&&this.state.beeps[a].shouldPlaySound&&(this.$3||(this.$3=new(b("NotificationSound"))(this.props.soundPath)),this.$3.play(a)),this.props.shouldLogImpressions&&b("NotificationImpressions").log([a],m)}.bind(this),this.onReadyToHide=function(a,b){this.setState(function(b){var c=babelHelpers["extends"]({},b.beeps);c[a]=babelHelpers["extends"]({},c[a],{state:j.READY_TO_HIDE});return babelHelpers["extends"]({},b,{beeps:c})}),this.$2||this.$5(b)}.bind(this),this.$8=function(a){this.setState(function(b){var c=babelHelpers["extends"]({},b.beeps);c[a]=babelHelpers["extends"]({},c[a],{state:j.RENDERED});return babelHelpers["extends"]({},b,{beeps:c})})}.bind(this),this.$7=function(){this.$2=null,this.setState(function(a){var b=babelHelpers["extends"]({},a.beeps);Object.keys(b).forEach(function(a){b[a].state==j.READY_TO_HIDE&&(b[a]=babelHelpers["extends"]({},b[a],{state:j.FADING_OUT}))});return babelHelpers["extends"]({},a,{beeps:b,fading:!0})}),b("setTimeoutAcrossTransitions")(b("shield")(this.$9,this),k)}.bind(this),this.$9=function(){__p&&__p();if(!this.state.fading)return;this.setState(function(a){var b=babelHelpers["extends"]({},a.beeps);Object.keys(b).forEach(function(a){b[a].state==j.FADING_OUT&&delete b[a]});return babelHelpers["extends"]({},a,{beeps:b,fading:!1})});b("setTimeoutAcrossTransitions")(function(){this.setState(function(a){var b=babelHelpers["extends"]({},a.beeps);Object.keys(b).forEach(function(a){b[a].state==j.PENDING&&(b[a]=babelHelpers["extends"]({},b[a],{state:j.RENDERED}))});return babelHelpers["extends"]({},a,{beeps:b})})}.bind(this))}.bind(this),c}a.prototype.UNSAFE_componentWillMount=function(){"use strict";__p&&__p();var a=new(b("SubscriptionsHandler"))();a.addSubscriptions(b("NotificationUpdates").subscribe("update-notifications",function(a,b){if(b.payloadsource===o||b.payloadsource===n){a=b.nodes;a&&a.length&&this.handleBeepChanges(this.$4(a))}}.bind(this)),b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("notif_sound_pref_changed"),function(a,b){this.setState({soundEnabled:b.obj.enabled})}.bind(this)));a.addSubscriptions(b("FacebookWebNotificationsSubscription").subscribe({event:"NEW_BEEPER",callback:function(a){var b=a.notification;a=a.should_play_sound;if(b!==null){var c;this.handleBeepChanges((c={},c[b.alert_id]={notification:b,shouldPlaySound:a},c))}}.bind(this)}));this.$1=a;b("Arbiter").inform("NotificationBeeper/mounted",null,"persistent")};a.prototype.componentWillUnmount=function(){"use strict";this.$1&&this.$1.release(),this.$1=null};a.prototype.$5=function(a){"use strict";this.$2&&b("clearTimeout")(this.$2),this.$2=b("setTimeoutAcrossTransitions")(b("shield")(this.$7,this),a==null?l:a)};a.prototype.handleBeepChanges=function(a){"use strict";var b=this.state.fading?j.PENDING:j.RENDERED,c=!1,d=babelHelpers["extends"]({},this.state.beeps);Object.keys(a).reverse().forEach(function(e){var f=a[e],g=d[e];(!g||g.notification.alert_id!==f.notification.alert_id||g.notification.creation_time!==f.notification.creation_time)&&(g&&(c=!0,delete d[e]),d[e]=babelHelpers["extends"]({},f,{state:b}))});c&&this.$5();this.setState({beeps:d})};a.prototype.render=function(){"use strict";__p&&__p();var a=this.state.beeps,c=[];Object.keys(a).reverse().forEach(function(d){var e=a[d];if(e.state==j.PENDING)return;c.push(b("React").createElement(b("NotificationBeeperItem.react"),{key:d,fadingOut:this.state.fading&&e.state==j.FADING_OUT,notification:e.notification,onInserted:this.$6,onReadyToHide:this.onReadyToHide,onPreventHide:this.$8}))}.bind(this),this);var d=c.length>0;d=(d?"":"hidden_elem")+" _50d1";return b("React").createElement("ul",{ref:"container",className:d,"data-gt":this.props.tracking,"data-testid":b("NotifTestIDs").BEEPER_LIST,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},c)};a.prototype.$4=function(a){"use strict";return a.reduce(function(a,b){a[b.alert_id]={notification:b,shouldPlaySound:!1};return a},{})};e.exports=a}),null);
__d("NotificationBeeperContainer",["NotificationBeeper.react","React","ReactDOM"],(function(a,b,c,d,e,f){a={renderBeeper:function(a,c){b("ReactDOM").render(b("React").createElement(b("NotificationBeeper.react"),a),c)}};e.exports=a}),null);
__d("QPEventHandling",[],(function(a,b,c,d,e,f){"use strict";a={registerClickListener:function(a,b,c){a.addEventListener("click",c)}};e.exports=a}),null);
__d("XQuickPromotionSimpleLoggingController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/qp/action/log/",{qp_id:{type:"Int",required:!0},qp_action:{type:"Enum",enumType:1},qp_instance_log_data:{type:"StringToStringMap",defaultValue:{}},qp_event:{type:"String"}})}),null);
__d("QPRenderer",["csx","CSS","FBLogger","Parent","QPEventHandling","XAsyncRequest","XQuickPromotionSimpleLoggingController","ge"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function h(a,c,d){a=b("XQuickPromotionSimpleLoggingController").getURIBuilder().setInt("qp_id",a).setString("qp_event",c).setStringToStringMap("qp_instance_log_data",d).getURI();new(b("XAsyncRequest"))(a).send()}function a(a,c,d){a=b("XQuickPromotionSimpleLoggingController").getURIBuilder().setInt("qp_id",a).setEnum("qp_action",c).setStringToStringMap("qp_instance_log_data",d).getURI();new(b("XAsyncRequest"))(a).send()}function c(a,c,d,e,f,g){e=b("ge")(e);e!==null?i(a,d,e,g,function(){f&&b("CSS").hide(c)}):b("FBLogger")("quick_promotion").mustfix("Quick Promotion %s is missing %s action element.",a,d)}function d(a,c,d,e,f){i(a,c,d,f,function(){if(e){var a=b("Parent").bySelector(d,"._5jmm");a instanceof HTMLElement&&b("CSS").hide(a)}})}function e(a,c,d){c.show();h(a,"view",{});c.subscribe("cancel",function(){h(a,"dialog_cancel",{})});for(var e=0;e<d.length;e++){var f=d[e],g=b("ge")(f.element_id);g!==null?(i(a,f.action,g,f.extra_log_data,f.should_close?function(){c.hide()}:function(){}),f.action=="primary"&&g.focus()):b("FBLogger")("quick_promotion").mustfix("Quick Promotion %s is missing %s action element.",a,f.action)}}function i(a,c,d,e,f){b("QPEventHandling").registerClickListener(d,c,function(){var d=b("XQuickPromotionSimpleLoggingController").getURIBuilder().setInt("qp_id",a).setEnum("qp_action",c).setStringToStringMap("qp_instance_log_data",e).getURI();new(b("XAsyncRequest"))(d).send();f()})}f.setAction=c;f.setComponentActionForFeedUnitQP=d;f.setDialogActionsAndShow=e;f.logAction=a;f.logEvent=h}),null);
__d("JewelQPLogging",["QPRenderer"],(function(a,b,c,d,e,f){var g=!1,h=null,i=!1;function j(){if(i)return;g&&h&&(i=!0,b("QPRenderer").logEvent(String(h.promotion_id),"view",h.instance_log_data?h.instance_log_data:{}))}a={onJewelOpened:function(){g=!0,j()},updateQPLogData:function(a){h=a,j()}};e.exports=a}),null);
__d("RequestsJewelStore",["Arbiter","ArbiterMixin","ChannelConstants"],(function(a,b,c,d,e,f){__p&&__p();a=babelHelpers["extends"]({},b("ArbiterMixin"),{_initialized:!1,_count:0,_requestList:{},addFriendRequests:function(a){Object.assign(this._requestList,a)},getRequestListKeys:function(){return Object.keys(this._requestList)},removeRequest:function(a){delete this._requestList[a]},getRequestCount:function(a){return this.getRequestListKeys().length},decrementCount:function(){this.setCount(Math.max(0,this._count-1))},setCount:function(a){b("Arbiter").inform("jewel/count-updated",{jewel:"requests",count:a},"state")},setupListeners:function(){__p&&__p();if(this._initialized)return;this._initialized=!0;b("Arbiter").subscribe("jewel/count-updated",function(a,b){b.jewel==="requests"&&this._updateCount(b.count)}.bind(this));b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("jewel_requests_add"),function(a,b){return this._addRequest(b)}.bind(this));b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("jewel_friending_notifs"),function(a,b){return this._addNotification(b)}.bind(this));b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("mobile_requests_count"),function(a,b){return this._updateBadgeCountFromObject(b)}.bind(this));b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("jewel_requests_remove_old"),function(a,b){return this._removeOldRequest(b)}.bind(this));b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("friend_requests_expired"),function(a,b){return this._refreshJewel(!0)}.bind(this));b("Arbiter").subscribe(b("ChannelConstants").getArbiterType("friend_requests_seen"),function(a,b){return this.setCount(0)}.bind(this))},_updateCount:function(a){var b=this._count!==a;this._count=a;b&&this.inform("countUpdated",a)},_addRequest:function(a){__p&&__p();if(!a)return;a=a.obj;var b=a.from;a=a.suggester;b=this._requestList[b];b||this.setCount(this._count+1);b=b?b.type:null;a=b===19&&!a;this.inform("addRequest",{shouldReplace:a,previousType:b})},_updateBadgeCountFromObject:function(a){if(!a)return;a=a.obj;a=a.num_unseen+a.num_friend_confirmed_unseen+a.num_expire_highlight_unseen;this._refreshJewel();this.setCount(a)},_addNotification:function(a){if(!a||a.obj.notif_type!=="friend_confirmed")return;this.inform("addNotification")},_removeOldRequest:function(a){if(!a)return;a=this._requestList[a.obj.from];if(!a)return;this.inform("removeOldRequest",a)},_refreshJewel:function(a){a===void 0&&(a=!1),this.inform("refreshJewel",a)}});e.exports=a}),null);
__d("XExpireFriendRequestsMutationController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ajax/requests/expire/",{from_m_jewel:{type:"Bool",defaultValue:!1}})}),null);
__d("XGigaboxxUpdateSeenTimeAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ajax/gigaboxx/endpoint/writesafe/update_last_seen_time/",{})}),null);
__d("RequestsJewelController",["invariant","Promise","Arbiter","AsyncRequest","CSS","DOM","DOMQuery","Event","EventProfiler","Focus","FriendRequestIHEventLogger","JewelQPLogging","MarauderLogger","Parent","RequestsJewelStore","ScrollableArea","TimeSlice","WebFriendingRequests","XExpireFriendRequestsMutationController","XGigaboxxUpdateSeenTimeAsyncController","XUIBadge","ge","getElementPosition","getViewportDimensions","promiseDone","requireWeak","throttle"],(function(a,b,c,d,e,f,g){__p&&__p();var h=null;b("requireWeak")("FriendBrowserCheckboxController",function(a){return h=a});var i=31,j=600,k=30,l=160;m.getInstance=function(){"use strict";return this.$12};m.updateFromDOM=function(){"use strict";var a=this.getInstance();a&&a.fromDom()};m.setupScroll=function(){"use strict";var a=this.getInstance();a&&a.setupScroll()};m.setInitialHeight=function(){"use strict";var a=this.getInstance();a&&a.updateHeight()};m.maybeLoadJewel=function(){"use strict";var a=this.getInstance();a&&a.maybeLoadJewel()};m.setTitleBadgeCount=function(a){"use strict";this.$11&&this.$11.setCount(a)};m.initTitleBadge=function(a,c){"use strict";this.$11||b("Arbiter").subscribe(["FriendRequest/delete","FriendRequest/confirm","FriendSuggestion/accepting","FriendSuggestion/ignoring"],function(a,b){return this.decrementTitleBadgeCount(b)}.bind(this)),this.$11=c};m.decrementTitleBadgeCount=function(a){"use strict";this.$11&&this.$11.setCount(this.$11.getCount()-1)};m.isOpen=function(){"use strict";var a=this.getInstance();return a?a.$2():!1};m.create=function(a,b){"use strict";this.$12&&g(0,5550);return this.$12=new m(a,b)};m.setupJewelRefresh=function(){"use strict";b("Arbiter").subscribe(["FriendRequest/confirmFromProfile","FriendRequest/deleteFromProfile"],function(a,c){a={};a.reloadcontent=!0;new(b("AsyncRequest"))().setURI("/ajax/requests/loader/").setData(a).setAllowCrossPageTransition(!0).send()})};function m(a,c){"use strict";this.$2=c,this.$1=a,this.$4=-1,this.$5=-1,this.$10=b("Promise").resolve(!0),this.$8=b("throttle").acrossTransitionsWithBlocking(function(){return this.$13({log_impressions:!0})}.bind(this),5e3),b("RequestsJewelStore").subscribe("addRequest",this.$14.bind(this)),b("RequestsJewelStore").subscribe("addNotification",function(){return this.$15()}.bind(this)),b("RequestsJewelStore").subscribe("removeOldRequest",this.$16.bind(this)),b("RequestsJewelStore").subscribe("refreshJewel",this.$17.bind(this)),b("RequestsJewelStore").setupListeners(),this.setupScroll(),this.$18(),this.$19(),this.$20()}m.prototype.fromDom=function(){"use strict";__p&&__p();var a={};b("DOMQuery").scry(this.$1,"li.objectListItem").forEach(function(b){b=b.getAttribute("id");if(b){b=this.$21(b);b&&b.requester&&(a[b.requester]=b)}}.bind(this));b("RequestsJewelStore").addFriendRequests(a);this.$22()};m.prototype.maybeLoadJewel=function(){"use strict";this.$9&&(this.$9(function(){this.openHandler()}.bind(this)),this.$9=null)};m.prototype.updateHeight=function(){"use strict";var a=this.$23();a&&(a.style.height=this.$24()+"px")};m.prototype.markSeen=function(){"use strict";b("promiseDone")(this.$10,function(){new(b("AsyncRequest"))(b("XGigaboxxUpdateSeenTimeAsyncController").getURIBuilder().getURI()).setMethod("POST").send()})};m.prototype.openHandler=function(){"use strict";__p&&__p();!this.$6&&this.$2()&&(this.$6=!0,b("EventProfiler").tagCurrentActiveInteractionsAs("FirstRequestsJewelOpen"));b("Arbiter").inform("requestsJewel/opened");var a=b("ge")("fbRequestsJewelLoading"),c=this.$23();new(b("AsyncRequest"))().setURI(b("XExpireFriendRequestsMutationController").getURIBuilder().getURI()).send();if(!a&&!c)this.$9=b("TimeSlice").getGuardedContinuation("RequestsJewelController clickBeforeE2E continuation");else if(a)this.$8();else{a=b("RequestsJewelStore").getRequestListKeys();a.length>0&&new(b("AsyncRequest"))().setAllowCrossPageTransition(!0).setURI("/friends/requests/log_impressions").setData({ids:a.join(","),ref:"jewel"}).send()}b("DOMQuery").scry(this.$1,"a.findFriendsLink").forEach(function(a){b("Focus").set(a)});c&&b("ScrollableArea").poke(c);b("JewelQPLogging").onJewelOpened()};m.prototype.closeHandler=function(){"use strict";b("Arbiter").inform("requestsJewel/closed"),b("DOMQuery").scry(this.$1,"li.jewelItemNew").forEach(function(a){b("CSS").removeClass(a,"jewelItemNew")}),b("DOMQuery").scry(this.$1,"span.highlightedExpireText").forEach(function(a){b("CSS").removeClass(a,"highlightedExpireText")})};m.prototype.setupScroll=function(){"use strict";var a=this.$23();a&&(this.$7=this.$25(),this.$3=0,b("ScrollableArea").getInstance(a).subscribe("scroll",this.$26.bind(this)),this.$27(),this.$28())};m.prototype.$18=function(){"use strict";b("Event").listen(this.$1,"submit",function(a){a=b("Parent").byClass(a.getTarget(),"objectListItem");a&&(b("CSS").removeClass(a,"jewelItemNew"),b("CSS").addClass(a,"jewelItemResponded"))})};m.prototype.$19=function(){"use strict";b("Event").listen(window,"resize",b("throttle").acrossTransitions(function(){this.updateHeight()}.bind(this)))};m.prototype.$20=function(){"use strict";b("Arbiter").subscribe("pymk-x-out",function(a,b){a=b.location;(a==="pymk_jewel_first_page"||a==="pymk_jewel")&&this.$27()}.bind(this))};m.prototype.$29=function(a){"use strict";a=parseInt(a,10);return isNaN(a)?null:a};m.prototype.$21=function(a){"use strict";a=a.match(/^(\d+)_(\d+)/);return!a?null:{requester:this.$29(a[1]),type:this.$29(a[2])}};m.prototype.$30=function(a,b){"use strict";return a==null||b==null?null:a+"_"+b};m.prototype.$31=function(a,b){"use strict";return a==null||b==null?null:a+"_"+b+"_req"};m.prototype.$23=function(){"use strict";return b("DOMQuery").scry(this.$1,".uiScrollableArea")[0]};m.prototype.$25=function(){"use strict";return b("DOMQuery").scry(this.$1,".uiScrollableAreaWrap")[0]};m.prototype.$26=function(){"use strict";__p&&__p();var a=b("DOMQuery").scry(this.$7,".uiMorePager").pop();if(a){var c=b("getElementPosition")(a).y,d=this.$23();c>0&&d&&b("CSS").addClass(d,"contentAfter");c=b("DOMQuery").find(a,"a");if(!c)return;d=b("getElementPosition")(c).y;if(d===this.$3)return;a=b("getElementPosition")(this.$7);a=a.y+a.height;if(d-300<a&&d>0){this.$3=d;a=c.getAttribute("ajaxify");a?new(b("AsyncRequest"))(a).setRelativeTo(c).setStatusElement(b("Parent").byClass(c,"stat_elem")).send():h&&h.getInstance("jewel").showMore()}}this.$27();this.$28()};m.prototype.$27=function(){"use strict";__p&&__p();if(!this.$7)return;var a=b("getElementPosition")(this.$7);a=a.y+a.height;var c=b("DOMQuery").scry(this.$1,"li.friendBrowserListUnit"),d=c.length-1;while(d>this.$4){var e=b("getElementPosition")(c[d]),f=e.y;e=f+e.height;if(f>0&&e<=a)break;d-=1}f=d;while(d>this.$4)b("WebFriendingRequests").logPYMKImpression(c[d],"pymk_jewel"),d--;this.$4=Math.max(this.$4,f)};m.prototype.$28=function(){"use strict";__p&&__p();if(!this.$7)return;var a=b("getElementPosition")(this.$7);a=a.y+a.height;var c=b("DOMQuery").scry(this.$1,"li.objectListItem"),d=c.length-1;while(d>this.$5){var e=b("getElementPosition")(c[d]),f=e.y;e=f+e.height;if(f>0&&e<=a)break;d-=1}f=d;while(d>this.$5){e=c[d].getAttribute("id");e=e.substring(0,e.length-6);b("MarauderLogger").log("request_seen","friend_request_waterfall",{request_id:e,request_location:"requests_jewel"});b("FriendRequestIHEventLogger").logImpression(e);d-=1}this.$5=Math.max(this.$5,f)};m.prototype.$13=function(a){a===void 0&&(a={}),this.$10=new(b("Promise"))(function(c,d){var e=!b("ge")("fbRequestsJewelLoading");new(b("AsyncRequest"))().setURI("/ajax/requests/loader/").setData(babelHelpers["extends"]({},a,{reloadcontent:e})).setFinallyHandler(function(a){!a.getError()?c(!0):d()}).send()})};m.prototype.$15=function(){"use strict";if(this.$2())return;this.$13()};m.prototype.$14=function(a,b){a=b.shouldReplace;b=b.previousType;if(!a&&(b||this.$2()))return;this.$13()};m.prototype.$16=function(a,c){a=c.requester;c=c.type;if(this.$2()||b("ge")("fbRequestsJewelLoading")!=null)return;var d=this.$30(a,c),e=d&&b("ge")(d);e||(d=this.$31(a,c),e=b("ge")(d));e&&(b("CSS").hasClass(e,"jewelItemNew")&&b("RequestsJewelStore").decrementCount(),b("CSS").hasClass(e,"jewelItemResponded")||(b("DOM").remove(e),b("RequestsJewelStore").removeRequest(a),this.$22()))};m.prototype.$17=function(a,b){"use strict";if(b!==!0&&this.$2())return;this.$13()};m.prototype.$22=function(){"use strict";b("DOMQuery").scry(this.$1,"li.empty").forEach(function(a){b("CSS").conditionShow(a,b("RequestsJewelStore").getRequestCount()<=0)})};m.prototype.$24=function(){"use strict";return Math.min(Math.max(b("getViewportDimensions")().height-l,k),j)+i};m.$12=null;e.exports=m}),null);
__d("DeviceBasedLoginWWWQP",["CSS","Event","tidyEvent"],(function(a,b,c,d,e,f){"use strict";a={swapWithShadowMessageOnClick:function(a,c,d){b("tidyEvent")(b("Event").listen(a,"click",function(a){b("CSS").hide(c),b("CSS").show(d)}))}};e.exports=a}),null);
__d("MNCommerceActionTypes",["keyMirrorRecursive"],(function(a,b,c,d,e,f){"use strict";a=b("keyMirrorRecursive")({RECEIPT:{LOADED:null,LOAD_ERROR:null,RELOAD:null},SHIPMENT:{LOADED:null,LOAD_ERROR:null,RELOAD:null},DIALOG:{SHOW:null,HIDE:null},RETAIL_ITEM:{LOADED:null,LOAD_ERROR:null,RELOAD:null},PROMOTION_STATE:{LOADED:null,LOAD_ERROR:null,RELOAD:null},TRANSACTION_INVOICE:{LOADED:null,LOAD_ERROR:null,RELOAD:null},BOT_REVIEW_STATE:{LOADED:null,LOAD_ERROR:null,RELOAD:null}});e.exports=a}),null);
__d("FluxMixinLegacyInstrumentation",["FluxContainerInstrumentation"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){return a.constructor.displayName||a.constructor.name||"FluxMixinLegacy(unknown)"}var h={_callCalculateState:function(){var a=b("FluxContainerInstrumentation").onCalculateStateStart(g(this)),c=this._FluxMixinLegacyInstrumentationCalculateStateCaller.apply(this,arguments);a&&a();return c},UNSAFE_componentWillMount:function(){this.constructor._FluxMixinLegacyInstrumentationOnInitCalled||(b("FluxContainerInstrumentation").onInit(this.constructor),this.constructor._FluxMixinLegacyInstrumentationOnInitCalled=!0)},_FluxMixinLegacyInstrumentationEmittedChangeStores:null,_getCurrentDispatchForInstrumentation:function(){return b("FluxContainerInstrumentation").updateTracking&&b("FluxContainerInstrumentation").updateTracking.getCurrentDispatch()},_onInitialStateForInstrumentation:function(){b("FluxContainerInstrumentation").updateTracking&&b("FluxContainerInstrumentation").updateTracking.initialState(this,g(this))},_onReceivePropsForInstrumentation:function(a){b("FluxContainerInstrumentation").updateTracking&&b("FluxContainerInstrumentation").updateTracking.receiveProps(this,g(this),a)},_addStoreEmitForInstrumentation:function(a){b("FluxContainerInstrumentation").updateTracking&&b("FluxContainerInstrumentation").updateTracking.shouldRecord()&&(this._FluxMixinLegacyInstrumentationEmittedChangeStores=this._FluxMixinLegacyInstrumentationEmittedChangeStores||[],b("FluxContainerInstrumentation").addStoreDependencies(this._FluxMixinLegacyInstrumentationEmittedChangeStores,a))},_collectStoreEmitsForInstrumentation:function(){var a=this._FluxMixinLegacyInstrumentationEmittedChangeStores;this._FluxMixinLegacyInstrumentationEmittedChangeStores=null;return a},_logStoreEmitsForInstrumentation:function(a,c){b("FluxContainerInstrumentation").updateTracking&&b("FluxContainerInstrumentation").updateTracking.storeEmitChange(this,g(this),a||[],c)},componentDidUpdate:function(a,c){b("FluxContainerInstrumentation").onDidUpdate(this,g(this),a,this.props,c,this.state)}};function a(a){b("FluxContainerInstrumentation").hasInstrumentation()&&(a.mixins=a.mixins||[],a.mixins.push(h),a._FluxMixinLegacyInstrumentationCalculateStateCaller=a._callCalculateState,delete a._callCalculateState);return a}e.exports={addInstrumentation:a}}),null);
__d("PureStoreBasedStateMixin",["invariant","FluxMixinLegacyInstrumentation","StoreBasedStateMixinHelper","setImmediate"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(){__p&&__p();for(var a=arguments.length,c=new Array(a),d=0;d<a;d++)c[d]=arguments[d];return b("FluxMixinLegacyInstrumentation").addInstrumentation({_callCalculateState:function(){return this.constructor.calculateState()},getInitialState:function(){this._onInitialStateForInstrumentation&&this._onInitialStateForInstrumentation();return this._callCalculateState()},UNSAFE_componentWillMount:function(){__p&&__p();this.constructor.calculateState||g(0,2396);this._recalculateStateID=null;var a=function(){if(this.isMounted()){var a=this._collectStoreEmitsForInstrumentation?this._collectStoreEmitsForInstrumentation():null,b=this._callCalculateState();this.setState(this._logStoreEmitsForInstrumentation!=null?function(){a!=null&&this._logStoreEmitsForInstrumentation&&this._logStoreEmitsForInstrumentation(a);return b}.bind(this):b)}this._recalculateStateID=null}.bind(this);this._mixin=new(b("StoreBasedStateMixinHelper"))(c);this._mixin.subscribeCallback(function(){this._recalculateStateID===null&&(this._recalculateStateID=b("setImmediate")(a))}.bind(this),this._addStoreEmitForInstrumentation)},componentWillUnmount:function(){this._mixin.release(),this._mixin=null}})}.bind(this);e.exports=a}),null);
__d("FBPaymentsDispatcher",["ExplicitRegistrationReactDispatcher"],(function(a,b,c,d,e,f){"use strict";var g;c=babelHelpers.inherits(a,b("ExplicitRegistrationReactDispatcher"));g=c&&c.prototype;function a(a){g.constructor.call(this,a),this.dispatch=this.dispatch.bind(this)}e.exports=new a({strict:!1})}),null);
__d("FBPaymentsDialogActions",["FBPaymentsDispatcher","keyMirror"],(function(a,b,c,d,e,f){"use strict";var g={types:b("keyMirror")({SHOW_DIALOG:null,HIDE_DIALOG:null}),showDialog:function(a,c){b("FBPaymentsDispatcher").dispatch({type:g.types.SHOW_DIALOG,data:{dialogClass:a,dialogProps:c}})},hideDialog:function(){b("FBPaymentsDispatcher").dispatch({type:g.types.HIDE_DIALOG,data:{}})}};e.exports=g}),null);
__d("FBPaymentsDialogStore",["FBPaymentsDialogActions","FBPaymentsDispatcher","FluxStore"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("FluxStore"));g=c&&c.prototype;function a(){g.constructor.call(this,b("FBPaymentsDispatcher")),this.$FBPaymentsDialogStore1={dialogClass:null,dialogProps:null}}a.prototype.__onDispatch=function(a){var c=a.type;a=a.data;switch(c){case b("FBPaymentsDialogActions").types.SHOW_DIALOG:this.$FBPaymentsDialogStore1={dialogClass:a.dialogClass,dialogProps:a.dialogProps};this.__emitChange();break;case b("FBPaymentsDialogActions").types.HIDE_DIALOG:this.$FBPaymentsDialogStore1={dialogClass:null,dialogProps:null};this.__emitChange();break}};a.prototype.getState=function(){return this.$FBPaymentsDialogStore1};a.__moduleID=e.id;e.exports=new a()}),null);
__d("FBPaymentsDialogContainer.react",["FBPaymentsDialogStore","FBPaymentsDispatcher","FluxContainer","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("React").Component);g&&g.prototype;a.calculateState=function(){return b("FBPaymentsDialogStore").getState()};a.getStores=function(){return[b("FBPaymentsDialogStore")]};a.prototype.UNSAFE_componentWillMount=function(){b("FBPaymentsDispatcher").explicitlyRegisterStore(b("FBPaymentsDialogStore"))};a.prototype.render=function(){if(!this.state.dialogClass)return null;var a=this.state.dialogClass;return b("React").createElement(a,babelHelpers["extends"]({},this.state.dialogProps,{key:"dialog"}))};function a(){g.apply(this,arguments)}e.exports=b("FluxContainer").create(a)}),null);